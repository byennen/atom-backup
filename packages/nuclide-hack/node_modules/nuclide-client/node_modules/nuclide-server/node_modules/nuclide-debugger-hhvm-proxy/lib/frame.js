
/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 */

var _require = require('./utils');

var uriToPath = _require.uriToPath;

/**
 * A dbgp Frame after it is converted from XML to JSON:
 * {
 *   "$":{
 *     "where":"{main}",
 *     "level":"0",
 *     "type":"file",
 *     "filename":"file:///home/peterhal/test/dbgp/test-client.php",
 *     "lineno":"2"
 *   }
 * }
 */

function idOfFrame(frame) {
  // TODO: Mangle in the transactionId of the most recent pause/status.
  return Number(frame.$.level);
}

function functionOfFrame(frame) {
  return frame.$.where;
}

// Returns an absolute path
function fileOfFrame(frame) {
  return uriToPath(frame.$.filename);
}

function locationOfFrame(frame) {
  return {
    // TODO: columnNumber: from cmdbegin/end
    lineNumber: Number(frame.$.lineno) - 1,
    scriptId: fileOfFrame(frame)
  };
}

module.exports = {
  idOfFrame: idOfFrame,
  functionOfFrame: functionOfFrame,
  fileOfFrame: fileOfFrame,
  locationOfFrame: locationOfFrame
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi92YXIvZm9sZGVycy94Zi9yc3BoNF9jNTczMTVyczU3eHhzZHNrcnhudjM2dDAvVC90bXBlbW0ySHVwdWJsaXNoX3BhY2thZ2VzL25wbS9udWNsaWRlLWRlYnVnZ2VyLWhodm0tcHJveHkvbGliL2ZyYW1lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFdBQVcsQ0FBQzs7Ozs7Ozs7OztlQVlNLE9BQU8sQ0FBQyxTQUFTLENBQUM7O0lBQS9CLFNBQVMsWUFBVCxTQUFTOzs7Ozs7Ozs7Ozs7Ozs7QUF3QmQsU0FBUyxTQUFTLENBQUMsS0FBcUIsRUFBVTs7QUFFaEQsU0FBTyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztDQUM5Qjs7QUFFRCxTQUFTLGVBQWUsQ0FBQyxLQUFxQixFQUFVO0FBQ3RELFNBQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7Q0FDdEI7OztBQUdELFNBQVMsV0FBVyxDQUFDLEtBQXFCLEVBQVU7QUFDbEQsU0FBTyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztDQUNwQzs7QUFFRCxTQUFTLGVBQWUsQ0FBQyxLQUFxQixFQUFFO0FBQzlDLFNBQU87O0FBRUwsY0FBVSxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7QUFDdEMsWUFBUSxFQUFFLFdBQVcsQ0FBQyxLQUFLLENBQUM7R0FDN0IsQ0FBQztDQUNIOztBQUVELE1BQU0sQ0FBQyxPQUFPLEdBQUc7QUFDZixXQUFTLEVBQVQsU0FBUztBQUNULGlCQUFlLEVBQWYsZUFBZTtBQUNmLGFBQVcsRUFBWCxXQUFXO0FBQ1gsaUJBQWUsRUFBZixlQUFlO0NBQ2hCLENBQUMiLCJmaWxlIjoiL3Zhci9mb2xkZXJzL3hmL3JzcGg0X2M1NzMxNXJzNTd4eHNkc2tyeG52MzZ0MC9UL3RtcGVtbTJIdXB1Ymxpc2hfcGFja2FnZXMvbnBtL251Y2xpZGUtZGVidWdnZXItaGh2bS1wcm94eS9saWIvZnJhbWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJztcbi8qIEBmbG93ICovXG5cbi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgbGljZW5zZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluXG4gKiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5cbnZhciB7dXJpVG9QYXRofSA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcblxuLyoqXG4gKiBBIGRiZ3AgRnJhbWUgYWZ0ZXIgaXQgaXMgY29udmVydGVkIGZyb20gWE1MIHRvIEpTT046XG4gKiB7XG4gKiAgIFwiJFwiOntcbiAqICAgICBcIndoZXJlXCI6XCJ7bWFpbn1cIixcbiAqICAgICBcImxldmVsXCI6XCIwXCIsXG4gKiAgICAgXCJ0eXBlXCI6XCJmaWxlXCIsXG4gKiAgICAgXCJmaWxlbmFtZVwiOlwiZmlsZTovLy9ob21lL3BldGVyaGFsL3Rlc3QvZGJncC90ZXN0LWNsaWVudC5waHBcIixcbiAqICAgICBcImxpbmVub1wiOlwiMlwiXG4gKiAgIH1cbiAqIH1cbiAqL1xudHlwZSBEYmdwU3RhY2tGcmFtZSA9IHtcbiAgJDoge1xuICAgIHdoZXJlOiBzdHJpbmc7XG4gICAgbGV2ZWw6IHN0cmluZztcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgZmlsZW5hbWU6IHN0cmluZztcbiAgICBsaW5lbm86IHN0cmluZztcbiAgfVxufTtcblxuZnVuY3Rpb24gaWRPZkZyYW1lKGZyYW1lOiBEYmdwU3RhY2tGcmFtZSk6IE51bWJlciB7XG4gIC8vIFRPRE86IE1hbmdsZSBpbiB0aGUgdHJhbnNhY3Rpb25JZCBvZiB0aGUgbW9zdCByZWNlbnQgcGF1c2Uvc3RhdHVzLlxuICByZXR1cm4gTnVtYmVyKGZyYW1lLiQubGV2ZWwpO1xufVxuXG5mdW5jdGlvbiBmdW5jdGlvbk9mRnJhbWUoZnJhbWU6IERiZ3BTdGFja0ZyYW1lKTogc3RyaW5nIHtcbiAgcmV0dXJuIGZyYW1lLiQud2hlcmU7XG59XG5cbi8vIFJldHVybnMgYW4gYWJzb2x1dGUgcGF0aFxuZnVuY3Rpb24gZmlsZU9mRnJhbWUoZnJhbWU6IERiZ3BTdGFja0ZyYW1lKTogc3RyaW5nIHtcbiAgcmV0dXJuIHVyaVRvUGF0aChmcmFtZS4kLmZpbGVuYW1lKTtcbn1cblxuZnVuY3Rpb24gbG9jYXRpb25PZkZyYW1lKGZyYW1lOiBEYmdwU3RhY2tGcmFtZSkge1xuICByZXR1cm4ge1xuICAgIC8vIFRPRE86IGNvbHVtbk51bWJlcjogZnJvbSBjbWRiZWdpbi9lbmRcbiAgICBsaW5lTnVtYmVyOiBOdW1iZXIoZnJhbWUuJC5saW5lbm8pIC0gMSxcbiAgICBzY3JpcHRJZDogZmlsZU9mRnJhbWUoZnJhbWUpLFxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaWRPZkZyYW1lLFxuICBmdW5jdGlvbk9mRnJhbWUsXG4gIGZpbGVPZkZyYW1lLFxuICBsb2NhdGlvbk9mRnJhbWUsXG59O1xuIl19
