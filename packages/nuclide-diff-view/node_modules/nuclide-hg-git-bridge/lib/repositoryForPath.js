
/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 */

/**
 * @param aPath The NuclideUri of a file or directory for which you want to find
 *   a Repository it belongs to.
 * @return A Git or Hg repository the path belongs to, if any.
 */
function repositoryForPath(aPath) {
  // Calling atom.project.repositoryForDirectory gets the real path of the directory,
  // which requires a round-trip to the server for remote paths.
  // Instead, this function keeps filtering local.
  var repositoryContainsPath = require('./repositoryContainsPath');
  return atom.project.getRepositories().filter(function (repo) {
    try {
      return repositoryContainsPath(repo, aPath);
    } catch (e) {
      // The repo type is not supported.
      return false;
    }
  })[0];
}

module.exports = repositoryForPath;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi92YXIvZm9sZGVycy94Zi9yc3BoNF9jNTczMTVyczU3eHhzZHNrcnhudjM2dDAvVC90bXBlbW0ySHVwdWJsaXNoX3BhY2thZ2VzL25wbS9udWNsaWRlLWhnLWdpdC1icmlkZ2UvbGliL3JlcG9zaXRvcnlGb3JQYXRoLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFdBQVcsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JaLFNBQVMsaUJBQWlCLENBQUMsS0FBaUIsRUFBZTs7OztBQUl6RCxNQUFJLHNCQUFzQixHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ2pFLFNBQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLEVBQUUsQ0FBQyxNQUFNLENBQzFDLFVBQUMsSUFBSSxFQUFLO0FBQ1IsUUFBSTtBQUNGLGFBQU8sc0JBQXNCLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO0tBQzVDLENBQUMsT0FBTyxDQUFDLEVBQUU7O0FBRVYsYUFBTyxLQUFLLENBQUM7S0FDZDtHQUNGLENBQ0YsQ0FBQyxDQUFDLENBQUMsQ0FBQztDQUNOOztBQUVELE1BQU0sQ0FBQyxPQUFPLEdBQUcsaUJBQWlCLENBQUMiLCJmaWxlIjoiL3Zhci9mb2xkZXJzL3hmL3JzcGg0X2M1NzMxNXJzNTd4eHNkc2tyeG52MzZ0MC9UL3RtcGVtbTJIdXB1Ymxpc2hfcGFja2FnZXMvbnBtL251Y2xpZGUtaGctZ2l0LWJyaWRnZS9saWIvcmVwb3NpdG9yeUZvclBhdGguanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJztcbi8qIEBmbG93ICovXG5cbi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgbGljZW5zZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluXG4gKiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG4vKipcbiAqIEBwYXJhbSBhUGF0aCBUaGUgTnVjbGlkZVVyaSBvZiBhIGZpbGUgb3IgZGlyZWN0b3J5IGZvciB3aGljaCB5b3Ugd2FudCB0byBmaW5kXG4gKiAgIGEgUmVwb3NpdG9yeSBpdCBiZWxvbmdzIHRvLlxuICogQHJldHVybiBBIEdpdCBvciBIZyByZXBvc2l0b3J5IHRoZSBwYXRoIGJlbG9uZ3MgdG8sIGlmIGFueS5cbiAqL1xuZnVuY3Rpb24gcmVwb3NpdG9yeUZvclBhdGgoYVBhdGg6IE51Y2xpZGVVcmkpOiA/UmVwb3NpdG9yeSB7XG4gIC8vIENhbGxpbmcgYXRvbS5wcm9qZWN0LnJlcG9zaXRvcnlGb3JEaXJlY3RvcnkgZ2V0cyB0aGUgcmVhbCBwYXRoIG9mIHRoZSBkaXJlY3RvcnksXG4gIC8vIHdoaWNoIHJlcXVpcmVzIGEgcm91bmQtdHJpcCB0byB0aGUgc2VydmVyIGZvciByZW1vdGUgcGF0aHMuXG4gIC8vIEluc3RlYWQsIHRoaXMgZnVuY3Rpb24ga2VlcHMgZmlsdGVyaW5nIGxvY2FsLlxuICB2YXIgcmVwb3NpdG9yeUNvbnRhaW5zUGF0aCA9IHJlcXVpcmUoJy4vcmVwb3NpdG9yeUNvbnRhaW5zUGF0aCcpO1xuICByZXR1cm4gYXRvbS5wcm9qZWN0LmdldFJlcG9zaXRvcmllcygpLmZpbHRlcihcbiAgICAocmVwbykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHJlcG9zaXRvcnlDb250YWluc1BhdGgocmVwbywgYVBhdGgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBUaGUgcmVwbyB0eXBlIGlzIG5vdCBzdXBwb3J0ZWQuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIClbMF07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVwb3NpdG9yeUZvclBhdGg7XG4iXX0=
