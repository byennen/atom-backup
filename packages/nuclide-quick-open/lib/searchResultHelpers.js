
/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 */

var isEmpty = require('nuclide-commons').object.isEmpty;

function filterEmptyResults(resultsGroupedByService) {
  var filteredTree = {};

  for (var serviceName in resultsGroupedByService) {
    var directories = resultsGroupedByService[serviceName];
    var nonEmptyDirectories = {};
    for (var dirName in directories) {
      if (directories[dirName].items.length) {
        nonEmptyDirectories[dirName] = directories[dirName];
      }
    }
    if (!isEmpty(nonEmptyDirectories)) {
      filteredTree[serviceName] = nonEmptyDirectories;
    }
  }
  return filteredTree;
}

function flattenResults(resultsGroupedByService) {
  var items = [];
  for (var serviceName in resultsGroupedByService) {
    for (var dirName in resultsGroupedByService[serviceName]) {
      items.push(resultsGroupedByService[serviceName][dirName].items);
    }
  }
  return Array.prototype.concat.apply([], items);
}

module.exports = {
  filterEmptyResults: filterEmptyResults,
  flattenResults: flattenResults
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi92YXIvZm9sZGVycy94Zi9yc3BoNF9jNTczMTVyczU3eHhzZHNrcnhudjM2dDAvVC90bXBlbW0ySHVwdWJsaXNoX3BhY2thZ2VzL2FwbS9udWNsaWRlLXF1aWNrLW9wZW4vbGliL3NlYXJjaFJlc3VsdEhlbHBlcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsV0FBVyxDQUFDOzs7Ozs7Ozs7O0lBY1YsT0FBTyxHQUNMLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLE1BQU0sQ0FEbkMsT0FBTzs7QUFHVCxTQUFTLGtCQUFrQixDQUFDLHVCQUF1QyxFQUFtQjtBQUNwRixNQUFJLFlBQVksR0FBRyxFQUFFLENBQUM7O0FBRXRCLE9BQUssSUFBSSxXQUFXLElBQUksdUJBQXVCLEVBQUU7QUFDL0MsUUFBSSxXQUFXLEdBQUcsdUJBQXVCLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDdkQsUUFBSSxtQkFBbUIsR0FBRyxFQUFFLENBQUM7QUFDN0IsU0FBSyxJQUFJLE9BQU8sSUFBSSxXQUFXLEVBQUU7QUFDL0IsVUFBSSxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRTtBQUNyQywyQkFBbUIsQ0FBQyxPQUFPLENBQUMsR0FBRyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7T0FDckQ7S0FDRjtBQUNELFFBQUksQ0FBQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsRUFBRTtBQUNqQyxrQkFBWSxDQUFDLFdBQVcsQ0FBQyxHQUFHLG1CQUFtQixDQUFDO0tBQ2pEO0dBQ0Y7QUFDRCxTQUFPLFlBQVksQ0FBQztDQUNyQjs7QUFFRCxTQUFTLGNBQWMsQ0FBQyx1QkFBdUMsRUFBYztBQUMzRSxNQUFJLEtBQUssR0FBRyxFQUFFLENBQUM7QUFDZixPQUFLLElBQUksV0FBVyxJQUFJLHVCQUF1QixFQUFFO0FBQy9DLFNBQUssSUFBSSxPQUFPLElBQUksdUJBQXVCLENBQUMsV0FBVyxDQUFDLEVBQUU7QUFDeEQsV0FBSyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUNqRTtHQUNGO0FBQ0QsU0FBTyxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEtBQUssQ0FBQyxDQUFDO0NBQ2hEOztBQUVELE1BQU0sQ0FBQyxPQUFPLEdBQUc7QUFDZixvQkFBa0IsRUFBbEIsa0JBQWtCO0FBQ2xCLGdCQUFjLEVBQWQsY0FBYztDQUNmLENBQUMiLCJmaWxlIjoiL3Zhci9mb2xkZXJzL3hmL3JzcGg0X2M1NzMxNXJzNTd4eHNkc2tyeG52MzZ0MC9UL3RtcGVtbTJIdXB1Ymxpc2hfcGFja2FnZXMvYXBtL251Y2xpZGUtcXVpY2stb3Blbi9saWIvc2VhcmNoUmVzdWx0SGVscGVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2UgYmFiZWwnO1xuLyogQGZsb3cgKi9cblxuLypcbiAqIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBsaWNlbnNlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW5cbiAqIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbnR5cGUgR3JvdXBlZFJlc3VsdHMgPSB7c3RyaW5nOiB7c3RyaW5nOiB7aXRlbXM6IEFycmF5PGFueT59fX07XG5cbnZhciB7XG4gIGlzRW1wdHlcbn0gPSByZXF1aXJlKCdudWNsaWRlLWNvbW1vbnMnKS5vYmplY3Q7XG5cbmZ1bmN0aW9uIGZpbHRlckVtcHR5UmVzdWx0cyhyZXN1bHRzR3JvdXBlZEJ5U2VydmljZTogR3JvdXBlZFJlc3VsdHMpIDogR3JvdXBlZFJlc3VsdHMge1xuICB2YXIgZmlsdGVyZWRUcmVlID0ge307XG5cbiAgZm9yICh2YXIgc2VydmljZU5hbWUgaW4gcmVzdWx0c0dyb3VwZWRCeVNlcnZpY2UpIHtcbiAgICB2YXIgZGlyZWN0b3JpZXMgPSByZXN1bHRzR3JvdXBlZEJ5U2VydmljZVtzZXJ2aWNlTmFtZV07XG4gICAgdmFyIG5vbkVtcHR5RGlyZWN0b3JpZXMgPSB7fTtcbiAgICBmb3IgKHZhciBkaXJOYW1lIGluIGRpcmVjdG9yaWVzKSB7XG4gICAgICBpZiAoZGlyZWN0b3JpZXNbZGlyTmFtZV0uaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgIG5vbkVtcHR5RGlyZWN0b3JpZXNbZGlyTmFtZV0gPSBkaXJlY3Rvcmllc1tkaXJOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFpc0VtcHR5KG5vbkVtcHR5RGlyZWN0b3JpZXMpKSB7XG4gICAgICBmaWx0ZXJlZFRyZWVbc2VydmljZU5hbWVdID0gbm9uRW1wdHlEaXJlY3RvcmllcztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZpbHRlcmVkVHJlZTtcbn1cblxuZnVuY3Rpb24gZmxhdHRlblJlc3VsdHMocmVzdWx0c0dyb3VwZWRCeVNlcnZpY2U6IEdyb3VwZWRSZXN1bHRzKTogQXJyYXk8YW55PiB7XG4gIHZhciBpdGVtcyA9IFtdO1xuICBmb3IgKHZhciBzZXJ2aWNlTmFtZSBpbiByZXN1bHRzR3JvdXBlZEJ5U2VydmljZSkge1xuICAgIGZvciAodmFyIGRpck5hbWUgaW4gcmVzdWx0c0dyb3VwZWRCeVNlcnZpY2Vbc2VydmljZU5hbWVdKSB7XG4gICAgICBpdGVtcy5wdXNoKHJlc3VsdHNHcm91cGVkQnlTZXJ2aWNlW3NlcnZpY2VOYW1lXVtkaXJOYW1lXS5pdGVtcyk7XG4gICAgfVxuICB9XG4gIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBpdGVtcyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBmaWx0ZXJFbXB0eVJlc3VsdHMsXG4gIGZsYXR0ZW5SZXN1bHRzLFxufTtcbiJdfQ==
