
/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 */
module.exports = {

  getConfigValueAsync: function getConfigValueAsync(key) {
    return (function () {
      var observedValue;
      var promiseThatResolvesToValue = new Promise(function (resolve, reject) {
        // Note that this creates an observer for the key that will never be
        // disabled: the key will continue to be observed for the lifetime of
        // the app.
        atom.config.observe(key, function (value) {
          // TODO(mbolin): Figure out why this is called with undefined sometimes.
          if (value !== undefined) {
            observedValue = value;
            promiseThatResolvesToValue = undefined;
            resolve(value);
          }
        });
      });

      return function () {
        return observedValue ? Promise.resolve(observedValue) : promiseThatResolvesToValue;
      };
    })();
  }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi92YXIvZm9sZGVycy94Zi9yc3BoNF9jNTczMTVyczU3eHhzZHNrcnhudjM2dDAvVC90bXBlbW0ySHVwdWJsaXNoX3BhY2thZ2VzL25wbS9udWNsaWRlLWNvbW1vbnMvbGliL2NvbmZpZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxXQUFXLENBQUM7Ozs7Ozs7OztBQVVaLE1BQU0sQ0FBQyxPQUFPLEdBQUc7O0FBRWYscUJBQW1CLEVBQUEsNkJBQUMsR0FBRyxFQUFpQjtBQUN0QyxXQUFPLENBQUMsWUFBVztBQUNqQixVQUFJLGFBQWEsQ0FBQztBQUNsQixVQUFJLDBCQUEwQixHQUFHLElBQUksT0FBTyxDQUFDLFVBQUMsT0FBTyxFQUFFLE1BQU0sRUFBSzs7OztBQUloRSxZQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsVUFBQSxLQUFLLEVBQUk7O0FBRWhDLGNBQUksS0FBSyxLQUFLLFNBQVMsRUFBRTtBQUN2Qix5QkFBYSxHQUFHLEtBQUssQ0FBQztBQUN0QixzQ0FBMEIsR0FBRyxTQUFTLENBQUM7QUFDdkMsbUJBQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztXQUNoQjtTQUNGLENBQUMsQ0FBQztPQUNKLENBQUMsQ0FBQzs7QUFFSCxhQUFPLFlBQVc7QUFDaEIsZUFBTyxhQUFhLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsR0FDakQsMEJBQTBCLENBQUM7T0FDaEMsQ0FBQztLQUNILENBQUEsRUFBRyxDQUFDO0dBQ047Q0FDRixDQUFDIiwiZmlsZSI6Ii92YXIvZm9sZGVycy94Zi9yc3BoNF9jNTczMTVyczU3eHhzZHNrcnhudjM2dDAvVC90bXBlbW0ySHVwdWJsaXNoX3BhY2thZ2VzL25wbS9udWNsaWRlLWNvbW1vbnMvbGliL2NvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2UgYmFiZWwnO1xuLyogQGZsb3cgKi9cblxuLypcbiAqIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBsaWNlbnNlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW5cbiAqIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBnZXRDb25maWdWYWx1ZUFzeW5jKGtleSk6ICgpID0+IFByb21pc2Uge1xuICAgIHJldHVybiAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb2JzZXJ2ZWRWYWx1ZTtcbiAgICAgIHZhciBwcm9taXNlVGhhdFJlc29sdmVzVG9WYWx1ZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgY3JlYXRlcyBhbiBvYnNlcnZlciBmb3IgdGhlIGtleSB0aGF0IHdpbGwgbmV2ZXIgYmVcbiAgICAgICAgLy8gZGlzYWJsZWQ6IHRoZSBrZXkgd2lsbCBjb250aW51ZSB0byBiZSBvYnNlcnZlZCBmb3IgdGhlIGxpZmV0aW1lIG9mXG4gICAgICAgIC8vIHRoZSBhcHAuXG4gICAgICAgIGF0b20uY29uZmlnLm9ic2VydmUoa2V5LCB2YWx1ZSA9PiB7XG4gICAgICAgICAgLy8gVE9ETyhtYm9saW4pOiBGaWd1cmUgb3V0IHdoeSB0aGlzIGlzIGNhbGxlZCB3aXRoIHVuZGVmaW5lZCBzb21ldGltZXMuXG4gICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9ic2VydmVkVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHByb21pc2VUaGF0UmVzb2x2ZXNUb1ZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBvYnNlcnZlZFZhbHVlID8gUHJvbWlzZS5yZXNvbHZlKG9ic2VydmVkVmFsdWUpIDpcbiAgICAgICAgICAgIHByb21pc2VUaGF0UmVzb2x2ZXNUb1ZhbHVlO1xuICAgICAgfTtcbiAgICB9KSgpO1xuICB9LFxufTtcbiJdfQ==
