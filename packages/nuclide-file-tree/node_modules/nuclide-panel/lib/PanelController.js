
/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 */

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var React = require('react-for-atom');

var PanelComponent = require('./PanelComponent');

/**
 * Instantiating this class adds it to the UI (even if it's not visible).
 * It currently does this with `atom.workspace.addLeftPanel()` but should
 * support different sides in the future.
 */

var PanelController = (function () {
  function PanelController(childElement, props, state) {
    _classCallCheck(this, PanelController);

    this._hostEl = document.createElement('div');
    // Fill the entire panel with this div so content can also use 100% to fill
    // up the entire panel.
    this._hostEl.style.height = '100%';

    var shouldBeVisible = false;
    var initialLength = null;
    if (state) {
      props.initialLength = state.resizableLength;
      shouldBeVisible = state.isVisible;
    }

    this._component = React.render(React.createElement(
      PanelComponent,
      props,
      childElement
    ), this._hostEl);
    this._panel = atom.workspace.addLeftPanel({ item: this._hostEl, visible: shouldBeVisible });
  }

  _createClass(PanelController, [{
    key: 'destroy',
    value: function destroy() {
      React.unmountComponentAtNode(this._hostEl);
      this._panel.destroy();
    }
  }, {
    key: 'toggle',
    value: function toggle() {
      this.setVisible(!this.isVisible());
    }
  }, {
    key: 'setVisible',
    value: function setVisible(shouldBeVisible) {
      if (shouldBeVisible) {
        this._panel.show();
        this._component.focus();
      } else {
        this._panel.hide();
      }
    }
  }, {
    key: 'isVisible',
    value: function isVisible() {
      return this._panel.isVisible();
    }
  }, {
    key: 'getChildComponent',
    value: function getChildComponent() {
      return this._component.getChildComponent();
    }
  }, {
    key: 'serialize',
    value: function serialize() {
      return {
        isVisible: this.isVisible(),
        resizableLength: this._component.getLength()
      };
    }
  }]);

  return PanelController;
})();

module.exports = PanelController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi92YXIvZm9sZGVycy94Zi9yc3BoNF9jNTczMTVyczU3eHhzZHNrcnhudjM2dDAvVC90bXBlbW0ySHVwdWJsaXNoX3BhY2thZ2VzL25wbS9udWNsaWRlLXBhbmVsL2xpYi9QYW5lbENvbnRyb2xsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsV0FBVyxDQUFDOzs7Ozs7Ozs7Ozs7OztBQVdaLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDOztBQUV0QyxJQUFJLGNBQWMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQzs7Ozs7Ozs7SUFZM0MsZUFBZTtBQUlSLFdBSlAsZUFBZSxDQUtqQixZQUEwQixFQUMxQixLQUFxQixFQUNyQixLQUE0QixFQUM1QjswQkFSRSxlQUFlOztBQVNqQixRQUFJLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7OztBQUc3QyxRQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDOztBQUVuQyxRQUFJLGVBQWUsR0FBRyxLQUFLLENBQUM7QUFDNUIsUUFBSSxhQUFhLEdBQUcsSUFBSSxDQUFDO0FBQ3pCLFFBQUksS0FBSyxFQUFFO0FBQ1QsV0FBSyxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUMsZUFBZSxDQUFDO0FBQzVDLHFCQUFlLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQztLQUNuQzs7QUFFRCxRQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQzFCO0FBQUMsb0JBQWM7TUFBSyxLQUFLO01BQUcsWUFBWTtLQUFrQixFQUMxRCxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDbEIsUUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxFQUFDLElBQUksRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxlQUFlLEVBQUMsQ0FBQyxDQUFDO0dBQzNGOztlQXpCRyxlQUFlOztXQTJCWixtQkFBUztBQUNkLFdBQUssQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDM0MsVUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztLQUN2Qjs7O1dBRUssa0JBQVM7QUFDYixVQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7S0FDcEM7OztXQUVTLG9CQUFDLGVBQXdCLEVBQVE7QUFDekMsVUFBSSxlQUFlLEVBQUU7QUFDbkIsWUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuQixZQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFDO09BQ3pCLE1BQU07QUFDTCxZQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO09BQ3BCO0tBQ0Y7OztXQUVRLHFCQUFZO0FBQ25CLGFBQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQztLQUNoQzs7O1dBRWdCLDZCQUFtQjtBQUNsQyxhQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztLQUM1Qzs7O1dBRVEscUJBQXlCO0FBQ2hDLGFBQU87QUFDTCxpQkFBUyxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUU7QUFDM0IsdUJBQWUsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsRUFBRTtPQUM3QyxDQUFDO0tBQ0g7OztTQTFERyxlQUFlOzs7QUE2RHJCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsZUFBZSxDQUFDIiwiZmlsZSI6Ii92YXIvZm9sZGVycy94Zi9yc3BoNF9jNTczMTVyczU3eHhzZHNrcnhudjM2dDAvVC90bXBlbW0ySHVwdWJsaXNoX3BhY2thZ2VzL25wbS9udWNsaWRlLXBhbmVsL2xpYi9QYW5lbENvbnRyb2xsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJztcbi8qIEBmbG93ICovXG5cbi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgbGljZW5zZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluXG4gKiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdC1mb3ItYXRvbScpO1xuXG52YXIgUGFuZWxDb21wb25lbnQgPSByZXF1aXJlKCcuL1BhbmVsQ29tcG9uZW50Jyk7XG5cbnR5cGUgUGFuZWxDb250cm9sbGVyU3RhdGUgPSB7XG4gIGlzVmlzaWJsZTogYm9vbGVhbjtcbiAgcmVzaXphYmxlTGVuZ3RoOiBudW1iZXI7XG59O1xuXG4vKipcbiAqIEluc3RhbnRpYXRpbmcgdGhpcyBjbGFzcyBhZGRzIGl0IHRvIHRoZSBVSSAoZXZlbiBpZiBpdCdzIG5vdCB2aXNpYmxlKS5cbiAqIEl0IGN1cnJlbnRseSBkb2VzIHRoaXMgd2l0aCBgYXRvbS53b3Jrc3BhY2UuYWRkTGVmdFBhbmVsKClgIGJ1dCBzaG91bGRcbiAqIHN1cHBvcnQgZGlmZmVyZW50IHNpZGVzIGluIHRoZSBmdXR1cmUuXG4gKi9cbmNsYXNzIFBhbmVsQ29udHJvbGxlciB7XG4gIF9ob3N0RWw6IEhUTUxFbGVtZW50O1xuICBfcGFuZWw6IGF0b20kUGFuZWw7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgY2hpbGRFbGVtZW50OiBSZWFjdEVsZW1lbnQsXG4gICAgcHJvcHM6IHtkb2NrOiBzdHJpbmd9LFxuICAgIHN0YXRlOiA/UGFuZWxDb250cm9sbGVyU3RhdGVcbiAgKSB7XG4gICAgdGhpcy5faG9zdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgLy8gRmlsbCB0aGUgZW50aXJlIHBhbmVsIHdpdGggdGhpcyBkaXYgc28gY29udGVudCBjYW4gYWxzbyB1c2UgMTAwJSB0byBmaWxsXG4gICAgLy8gdXAgdGhlIGVudGlyZSBwYW5lbC5cbiAgICB0aGlzLl9ob3N0RWwuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuXG4gICAgdmFyIHNob3VsZEJlVmlzaWJsZSA9IGZhbHNlO1xuICAgIHZhciBpbml0aWFsTGVuZ3RoID0gbnVsbDtcbiAgICBpZiAoc3RhdGUpIHtcbiAgICAgIHByb3BzLmluaXRpYWxMZW5ndGggPSBzdGF0ZS5yZXNpemFibGVMZW5ndGg7XG4gICAgICBzaG91bGRCZVZpc2libGUgPSBzdGF0ZS5pc1Zpc2libGU7XG4gICAgfVxuXG4gICAgdGhpcy5fY29tcG9uZW50ID0gUmVhY3QucmVuZGVyKFxuICAgICAgICA8UGFuZWxDb21wb25lbnQgey4uLnByb3BzfT57Y2hpbGRFbGVtZW50fTwvUGFuZWxDb21wb25lbnQ+LFxuICAgICAgICB0aGlzLl9ob3N0RWwpO1xuICAgIHRoaXMuX3BhbmVsID0gYXRvbS53b3Jrc3BhY2UuYWRkTGVmdFBhbmVsKHtpdGVtOiB0aGlzLl9ob3N0RWwsIHZpc2libGU6IHNob3VsZEJlVmlzaWJsZX0pO1xuICB9XG5cbiAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICBSZWFjdC51bm1vdW50Q29tcG9uZW50QXROb2RlKHRoaXMuX2hvc3RFbCk7XG4gICAgdGhpcy5fcGFuZWwuZGVzdHJveSgpO1xuICB9XG5cbiAgdG9nZ2xlKCk6IHZvaWQge1xuICAgIHRoaXMuc2V0VmlzaWJsZSghdGhpcy5pc1Zpc2libGUoKSk7XG4gIH1cblxuICBzZXRWaXNpYmxlKHNob3VsZEJlVmlzaWJsZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmIChzaG91bGRCZVZpc2libGUpIHtcbiAgICAgIHRoaXMuX3BhbmVsLnNob3coKTtcbiAgICAgIHRoaXMuX2NvbXBvbmVudC5mb2N1cygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9wYW5lbC5oaWRlKCk7XG4gICAgfVxuICB9XG5cbiAgaXNWaXNpYmxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9wYW5lbC5pc1Zpc2libGUoKTtcbiAgfVxuXG4gIGdldENoaWxkQ29tcG9uZW50KCk6IFJlYWN0Q29tcG9uZW50IHtcbiAgICByZXR1cm4gdGhpcy5fY29tcG9uZW50LmdldENoaWxkQ29tcG9uZW50KCk7XG4gIH1cblxuICBzZXJpYWxpemUoKTogUGFuZWxDb250cm9sbGVyU3RhdGUge1xuICAgIHJldHVybiB7XG4gICAgICBpc1Zpc2libGU6IHRoaXMuaXNWaXNpYmxlKCksXG4gICAgICByZXNpemFibGVMZW5ndGg6IHRoaXMuX2NvbXBvbmVudC5nZXRMZW5ndGgoKSxcbiAgICB9O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUGFuZWxDb250cm9sbGVyO1xuIl19
